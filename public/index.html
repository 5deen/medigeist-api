<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Medigeist REST API</title>
</head>

<body>
  <h1>Medigeist REST API</h1>
  <p>References:</p>
  <p><a href="https://axios-http.com">https://axios-http.com</a></p>
  <hr />
  <div>
    <h2>Sample POST Request (templates)</h2>
    <button type="submit" onclick="javascript:submit(endpoints.replit,data)">Submit</button>
    <button type="reset" onclick="javascript:reset()">Reset</button>
    <hr />
    <div id='result'></div>
  </div>
  <script type="text/javascript" language="javascript">

    const endpoints = {
        local:"http://localhost:3000/templates", 
        replit:"https://medigeist-api.5deen.repl.co/templates"
      };

    let data = { "ratio": 800, "lib": "set9", "text": "12bgF" };

    function reset() {
      document.getElementById("result").innerHTML = '<p>See the result here.</p>';
    }

    function createImage(svg, el) {
      let encoded = btoa(svg);
      let src = `data:image/svg+xml;base64,${encoded}`;
      let img = `<img src="${src}"/>`;

      document.getElementById(el).innerHTML = img;
    }

    function submit(ep,data) {
      
      axios.post(ep, data)
        .then(function (response) {
          console.log(response.data.uid);
          createImage(response.data.uid, "result");
        })
        .catch(function (error) {
          console.log(error);
        });

    }
  </script>
  <script src="https://cdn.jsdelivr.net/npm/axios@1.1.2/dist/axios.min.js"></script>
</body>

</html>